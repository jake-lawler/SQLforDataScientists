<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 The WHERE Clause | Notes on ‘SQL for Data Scientists’ by Renée M. P. Teate</title>
  <meta name="description" content="My Notes on ‘SQL for Data Scientists’." />
  <meta name="generator" content="bookdown 0.25 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 The WHERE Clause | Notes on ‘SQL for Data Scientists’ by Renée M. P. Teate" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="My Notes on ‘SQL for Data Scientists’." />
  <meta name="github-repo" content="jake-lawler/SQLforDataScientists" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 The WHERE Clause | Notes on ‘SQL for Data Scientists’ by Renée M. P. Teate" />
  
  <meta name="twitter:description" content="My Notes on ‘SQL for Data Scientists’." />
  

<meta name="author" content="Jake Lawler" />


<meta name="date" content="2022-04-03" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="select.html"/>
<link rel="next" href="case.html"/>
<script src="libs/header-attrs-2.13/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="data_sources.html"><a href="data_sources.html"><i class="fa fa-check"></i><b>1</b> Data Sources</a>
<ul>
<li class="chapter" data-level="1.1" data-path="data_sources.html"><a href="data_sources.html#chapter-notes"><i class="fa fa-check"></i><b>1.1</b> Chapter Notes</a></li>
<li class="chapter" data-level="1.2" data-path="data_sources.html"><a href="data_sources.html#exercises"><i class="fa fa-check"></i><b>1.2</b> Exercises</a>
<ul>
<li class="chapter" data-level="" data-path="data_sources.html"><a href="data_sources.html#ex.-1"><i class="fa fa-check"></i>Ex. 1</a></li>
<li class="chapter" data-level="" data-path="data_sources.html"><a href="data_sources.html#ex.-2"><i class="fa fa-check"></i>Ex. 2</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="select.html"><a href="select.html"><i class="fa fa-check"></i><b>2</b> The SELECT Statement</a>
<ul>
<li class="chapter" data-level="2.1" data-path="select.html"><a href="select.html#chapter-notes-1"><i class="fa fa-check"></i><b>2.1</b> Chapter Notes</a></li>
<li class="chapter" data-level="2.2" data-path="select.html"><a href="select.html#exercises-1"><i class="fa fa-check"></i><b>2.2</b> Exercises</a>
<ul>
<li class="chapter" data-level="" data-path="select.html"><a href="select.html#ex.-1-1"><i class="fa fa-check"></i>Ex. 1</a></li>
<li class="chapter" data-level="" data-path="select.html"><a href="select.html#ex.-2-1"><i class="fa fa-check"></i>Ex. 2</a></li>
<li class="chapter" data-level="" data-path="select.html"><a href="select.html#ex.-3"><i class="fa fa-check"></i>Ex. 3</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="where.html"><a href="where.html"><i class="fa fa-check"></i><b>3</b> The WHERE Clause</a>
<ul>
<li class="chapter" data-level="3.1" data-path="where.html"><a href="where.html#chapter-notes-2"><i class="fa fa-check"></i><b>3.1</b> Chapter Notes</a></li>
<li class="chapter" data-level="3.2" data-path="where.html"><a href="where.html#exercises-2"><i class="fa fa-check"></i><b>3.2</b> Exercises</a>
<ul>
<li class="chapter" data-level="" data-path="where.html"><a href="where.html#ex.-1-2"><i class="fa fa-check"></i>Ex. 1</a></li>
<li class="chapter" data-level="" data-path="where.html"><a href="where.html#ex.-2-2"><i class="fa fa-check"></i>Ex. 2</a></li>
<li class="chapter" data-level="" data-path="where.html"><a href="where.html#ex.-3-1"><i class="fa fa-check"></i>Ex. 3</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="case.html"><a href="case.html"><i class="fa fa-check"></i><b>4</b> CASE Statements</a>
<ul>
<li class="chapter" data-level="4.1" data-path="case.html"><a href="case.html#chapter-notes-3"><i class="fa fa-check"></i><b>4.1</b> Chapter Notes</a></li>
<li class="chapter" data-level="4.2" data-path="case.html"><a href="case.html#exercises-3"><i class="fa fa-check"></i><b>4.2</b> Exercises</a>
<ul>
<li class="chapter" data-level="" data-path="case.html"><a href="case.html#ex.-1-3"><i class="fa fa-check"></i>Ex. 1</a></li>
<li class="chapter" data-level="" data-path="case.html"><a href="case.html#ex.-2-3"><i class="fa fa-check"></i>Ex. 2</a></li>
<li class="chapter" data-level="" data-path="case.html"><a href="case.html#ex.-3-2"><i class="fa fa-check"></i>Ex. 3</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="sql_joins.html"><a href="sql_joins.html"><i class="fa fa-check"></i><b>5</b> SQL JOINs</a>
<ul>
<li class="chapter" data-level="5.1" data-path="sql_joins.html"><a href="sql_joins.html#chapter-notes-4"><i class="fa fa-check"></i><b>5.1</b> Chapter Notes</a></li>
<li class="chapter" data-level="5.2" data-path="sql_joins.html"><a href="sql_joins.html#exercises-4"><i class="fa fa-check"></i><b>5.2</b> Exercises</a>
<ul>
<li class="chapter" data-level="" data-path="sql_joins.html"><a href="sql_joins.html#ex.-1-4"><i class="fa fa-check"></i>Ex. 1</a></li>
<li class="chapter" data-level="" data-path="sql_joins.html"><a href="sql_joins.html#ex.-2-4"><i class="fa fa-check"></i>Ex. 2</a></li>
<li class="chapter" data-level="" data-path="sql_joins.html"><a href="sql_joins.html#ex.-3-3"><i class="fa fa-check"></i>Ex. 3</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="aggregating.html"><a href="aggregating.html"><i class="fa fa-check"></i><b>6</b> Aggregating Results for Analysis</a>
<ul>
<li class="chapter" data-level="6.1" data-path="aggregating.html"><a href="aggregating.html#chapter-notes-5"><i class="fa fa-check"></i><b>6.1</b> Chapter Notes</a></li>
<li class="chapter" data-level="6.2" data-path="aggregating.html"><a href="aggregating.html#exercises-5"><i class="fa fa-check"></i><b>6.2</b> Exercises</a>
<ul>
<li class="chapter" data-level="" data-path="aggregating.html"><a href="aggregating.html#ex.-1-5"><i class="fa fa-check"></i>Ex. 1</a></li>
<li class="chapter" data-level="" data-path="aggregating.html"><a href="aggregating.html#ex.-2-5"><i class="fa fa-check"></i>Ex. 2</a></li>
<li class="chapter" data-level="" data-path="aggregating.html"><a href="aggregating.html#ex.-3-4"><i class="fa fa-check"></i>Ex. 3</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="window_functions.html"><a href="window_functions.html"><i class="fa fa-check"></i><b>7</b> Window Functions and Subqueries</a>
<ul>
<li class="chapter" data-level="7.1" data-path="window_functions.html"><a href="window_functions.html#chapter-notes-6"><i class="fa fa-check"></i><b>7.1</b> Chapter Notes</a></li>
<li class="chapter" data-level="7.2" data-path="window_functions.html"><a href="window_functions.html#exercises-6"><i class="fa fa-check"></i><b>7.2</b> Exercises</a>
<ul>
<li class="chapter" data-level="" data-path="window_functions.html"><a href="window_functions.html#ex.-1-6"><i class="fa fa-check"></i>Ex. 1</a></li>
<li class="chapter" data-level="" data-path="window_functions.html"><a href="window_functions.html#ex.-2-6"><i class="fa fa-check"></i>Ex. 2</a></li>
<li class="chapter" data-level="" data-path="window_functions.html"><a href="window_functions.html#ex.-3-5"><i class="fa fa-check"></i>Ex. 3</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="date_time.html"><a href="date_time.html"><i class="fa fa-check"></i><b>8</b> Date and Time Functions</a>
<ul>
<li class="chapter" data-level="8.1" data-path="date_time.html"><a href="date_time.html#chapter-notes-7"><i class="fa fa-check"></i><b>8.1</b> Chapter Notes</a></li>
<li class="chapter" data-level="8.2" data-path="date_time.html"><a href="date_time.html#exercises-7"><i class="fa fa-check"></i><b>8.2</b> Exercises</a>
<ul>
<li class="chapter" data-level="" data-path="date_time.html"><a href="date_time.html#ex.-1-7"><i class="fa fa-check"></i>Ex. 1</a></li>
<li class="chapter" data-level="" data-path="date_time.html"><a href="date_time.html#ex.-2-7"><i class="fa fa-check"></i>Ex. 2</a></li>
<li class="chapter" data-level="" data-path="date_time.html"><a href="date_time.html#ex.-3-6"><i class="fa fa-check"></i>Ex. 3</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="date_time.html"><a href="date_time.html#further-reading"><i class="fa fa-check"></i>Further Reading</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="exploratory_analysis.html"><a href="exploratory_analysis.html"><i class="fa fa-check"></i><b>9</b> Exploratory Data Analysis with SQL</a>
<ul>
<li class="chapter" data-level="9.1" data-path="exploratory_analysis.html"><a href="exploratory_analysis.html#chapter-notes-8"><i class="fa fa-check"></i><b>9.1</b> Chapter Notes</a></li>
<li class="chapter" data-level="9.2" data-path="exploratory_analysis.html"><a href="exploratory_analysis.html#exercises-8"><i class="fa fa-check"></i><b>9.2</b> Exercises</a>
<ul>
<li class="chapter" data-level="" data-path="exploratory_analysis.html"><a href="exploratory_analysis.html#ex.-1-8"><i class="fa fa-check"></i>Ex. 1</a></li>
<li class="chapter" data-level="" data-path="exploratory_analysis.html"><a href="exploratory_analysis.html#ex.-2-8"><i class="fa fa-check"></i>Ex. 2</a></li>
<li class="chapter" data-level="" data-path="exploratory_analysis.html"><a href="exploratory_analysis.html#ex.-3-7"><i class="fa fa-check"></i>Ex. 3</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="exploratory_analysis.html"><a href="exploratory_analysis.html#further-reading-1"><i class="fa fa-check"></i>Further Reading</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Notes on ‘SQL for Data Scientists’ by Renée M. P. Teate</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="where" class="section level1" number="3">
<h1><span class="header-section-number">Chapter 3</span> The WHERE Clause</h1>
<div id="chapter-notes-2" class="section level2" number="3.1">
<h2><span class="header-section-number">3.1</span> Chapter Notes</h2>
<p>The chapter introduces the WHERE clause, which filters the results returned by your query. For example, the following code returns rows from the product table where the product_category_id is 1:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb19-1"><a href="where.html#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> product_id, product_name, product_category_id</span>
<span id="cb19-2"><a href="where.html#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> farmers_market.product </span>
<span id="cb19-3"><a href="where.html#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> product_category_id <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb19-4"><a href="where.html#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="kw">LIMIT</span> <span class="dv">5</span></span></code></pre></div>
<div class="knitsql-table">
<table>
<caption><span id="tab:unnamed-chunk-2">Table 2.1: </span>5 records</caption>
<thead>
<tr class="header">
<th align="right">product_id</th>
<th align="left">product_name</th>
<th align="right">product_category_id</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="left">Habanero Peppers - Organic</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="left">Jalapeno Peppers - Organic</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="left">Poblano Peppers - Organic</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="right">9</td>
<td align="left">Sweet Potatoes</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="right">12</td>
<td align="left">Baby Salad Lettuce Mix - Bag</td>
<td align="right">1</td>
</tr>
</tbody>
</table>
</div>
<p>We can use Boolean operators OR, AND, NOT, AND NOT, or OR NOT with the WHERE clause. For example:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb20-1"><a href="where.html#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> market_date, customer_id, vendor_id, product_id, quantity, quantity <span class="op">*</span> cost_to_customer_per_qty <span class="kw">AS</span> price</span>
<span id="cb20-2"><a href="where.html#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> farmers_market.customer_purchases</span>
<span id="cb20-3"><a href="where.html#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> customer_id <span class="op">=</span> <span class="dv">3</span> <span class="kw">OR</span> customer_id <span class="op">=</span> <span class="dv">4</span></span>
<span id="cb20-4"><a href="where.html#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="kw">ORDER</span> <span class="kw">BY</span> market_date, customer_id, vendor_id, product_id</span>
<span id="cb20-5"><a href="where.html#cb20-5" aria-hidden="true" tabindex="-1"></a><span class="kw">LIMIT</span> <span class="dv">5</span></span></code></pre></div>
<div class="knitsql-table">
<table>
<caption><span id="tab:unnamed-chunk-3">Table 2.2: </span>5 records</caption>
<thead>
<tr class="header">
<th align="left">market_date</th>
<th align="right">customer_id</th>
<th align="right">vendor_id</th>
<th align="right">product_id</th>
<th align="right">quantity</th>
<th align="right">price</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">2019-04-03</td>
<td align="right">3</td>
<td align="right">7</td>
<td align="right">4</td>
<td align="right">1</td>
<td align="right">4.0</td>
</tr>
<tr class="even">
<td align="left">2019-04-03</td>
<td align="right">4</td>
<td align="right">7</td>
<td align="right">4</td>
<td align="right">1</td>
<td align="right">4.0</td>
</tr>
<tr class="odd">
<td align="left">2019-04-06</td>
<td align="right">4</td>
<td align="right">8</td>
<td align="right">5</td>
<td align="right">1</td>
<td align="right">6.5</td>
</tr>
<tr class="even">
<td align="left">2019-04-10</td>
<td align="right">4</td>
<td align="right">7</td>
<td align="right">4</td>
<td align="right">5</td>
<td align="right">20.0</td>
</tr>
<tr class="odd">
<td align="left">2019-04-10</td>
<td align="right">4</td>
<td align="right">7</td>
<td align="right">4</td>
<td align="right">3</td>
<td align="right">12.0</td>
</tr>
</tbody>
</table>
</div>
<p>We can also use &gt;, &lt;, &gt;=, &lt;=.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb21-1"><a href="where.html#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> market_date, customer_id, vendor_id, product_id, quantity, quantity <span class="op">*</span> cost_to_customer_per_qty <span class="kw">AS</span> price</span>
<span id="cb21-2"><a href="where.html#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> farmers_market.customer_purchases</span>
<span id="cb21-3"><a href="where.html#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> customer_id <span class="op">&gt;</span> <span class="dv">2</span> <span class="kw">AND</span> customer_id <span class="op">&lt;=</span> <span class="dv">4</span> </span>
<span id="cb21-4"><a href="where.html#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="kw">ORDER</span> <span class="kw">BY</span> market_date, customer_id, vendor_id, product_id</span>
<span id="cb21-5"><a href="where.html#cb21-5" aria-hidden="true" tabindex="-1"></a><span class="kw">LIMIT</span> <span class="dv">5</span></span></code></pre></div>
<div class="knitsql-table">
<table>
<caption><span id="tab:unnamed-chunk-4">Table 2.3: </span>5 records</caption>
<thead>
<tr class="header">
<th align="left">market_date</th>
<th align="right">customer_id</th>
<th align="right">vendor_id</th>
<th align="right">product_id</th>
<th align="right">quantity</th>
<th align="right">price</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">2019-04-03</td>
<td align="right">3</td>
<td align="right">7</td>
<td align="right">4</td>
<td align="right">1</td>
<td align="right">4.0</td>
</tr>
<tr class="even">
<td align="left">2019-04-03</td>
<td align="right">4</td>
<td align="right">7</td>
<td align="right">4</td>
<td align="right">1</td>
<td align="right">4.0</td>
</tr>
<tr class="odd">
<td align="left">2019-04-06</td>
<td align="right">4</td>
<td align="right">8</td>
<td align="right">5</td>
<td align="right">1</td>
<td align="right">6.5</td>
</tr>
<tr class="even">
<td align="left">2019-04-10</td>
<td align="right">4</td>
<td align="right">7</td>
<td align="right">4</td>
<td align="right">5</td>
<td align="right">20.0</td>
</tr>
<tr class="odd">
<td align="left">2019-04-10</td>
<td align="right">4</td>
<td align="right">7</td>
<td align="right">4</td>
<td align="right">3</td>
<td align="right">12.0</td>
</tr>
</tbody>
</table>
</div>
<p>And we can nest operators using parentheses:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb22-1"><a href="where.html#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> product_id, product_name</span>
<span id="cb22-2"><a href="where.html#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> farmers_market.product </span>
<span id="cb22-3"><a href="where.html#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> product_id <span class="op">=</span> <span class="dv">10</span> </span>
<span id="cb22-4"><a href="where.html#cb22-4" aria-hidden="true" tabindex="-1"></a>      <span class="kw">OR</span> (product_id <span class="op">&gt;</span> <span class="dv">3</span> <span class="kw">AND</span> product_id <span class="op">&lt;</span> <span class="dv">8</span>)</span></code></pre></div>
<div class="knitsql-table">
<table>
<caption><span id="tab:unnamed-chunk-5">Table 0.1: </span>5 records</caption>
<thead>
<tr class="header">
<th align="right">product_id</th>
<th align="left">product_name</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">4</td>
<td align="left">Banana Peppers - Jar</td>
</tr>
<tr class="even">
<td align="right">5</td>
<td align="left">Whole Wheat Bread</td>
</tr>
<tr class="odd">
<td align="right">6</td>
<td align="left">Cut Zinnias Bouquet</td>
</tr>
<tr class="even">
<td align="right">7</td>
<td align="left">Apple Pie</td>
</tr>
<tr class="odd">
<td align="right">10</td>
<td align="left">Eggs</td>
</tr>
</tbody>
</table>
</div>
<p>We aren’t confined to filter on a single column, we could easily use the WHERE clause to return e.g. rows where the customer_id is &lt; 5 and the vendor_id is 8 or similar.</p>
<p>Other options for filtering include BETWEEN:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb23-1"><a href="where.html#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span> </span>
<span id="cb23-2"><a href="where.html#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> farmers_market.vendor_booth_assignments </span>
<span id="cb23-3"><a href="where.html#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> vendor_id <span class="op">=</span> <span class="dv">7</span> <span class="kw">AND</span> market_date <span class="kw">BETWEEN</span> <span class="st">&#39;2019-04-03&#39;</span> <span class="kw">AND</span> <span class="st">&#39;2019-04-16&#39;</span></span>
<span id="cb23-4"><a href="where.html#cb23-4" aria-hidden="true" tabindex="-1"></a><span class="kw">ORDER</span> <span class="kw">BY</span> market_date</span></code></pre></div>
<div class="knitsql-table">
<table>
<caption><span id="tab:unnamed-chunk-6">Table 2.4: </span>4 records</caption>
<thead>
<tr class="header">
<th align="right">vendor_id</th>
<th align="right">booth_number</th>
<th align="left">market_date</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">7</td>
<td align="right">11</td>
<td align="left">2019-04-03</td>
</tr>
<tr class="even">
<td align="right">7</td>
<td align="right">11</td>
<td align="left">2019-04-06</td>
</tr>
<tr class="odd">
<td align="right">7</td>
<td align="right">11</td>
<td align="left">2019-04-10</td>
</tr>
<tr class="even">
<td align="right">7</td>
<td align="right">11</td>
<td align="left">2019-04-13</td>
</tr>
</tbody>
</table>
</div>
<p>IN:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb24-1"><a href="where.html#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> customer_id, customer_first_name, customer_last_name</span>
<span id="cb24-2"><a href="where.html#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> farmers_market.customer </span>
<span id="cb24-3"><a href="where.html#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> customer_last_name <span class="kw">IN</span> (<span class="st">&#39;Diaz&#39;</span>, <span class="st">&#39;Edwards&#39;</span>, <span class="st">&#39;Wilson&#39;</span>)</span>
<span id="cb24-4"><a href="where.html#cb24-4" aria-hidden="true" tabindex="-1"></a><span class="kw">ORDER</span> <span class="kw">BY</span> customer_last_name, customer_first_name</span></code></pre></div>
<div class="knitsql-table">
<table>
<caption><span id="tab:unnamed-chunk-7">Table 2.5: </span>4 records</caption>
<thead>
<tr class="header">
<th align="right">customer_id</th>
<th align="left">customer_first_name</th>
<th align="left">customer_last_name</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">17</td>
<td align="left">Carlos</td>
<td align="left">Diaz</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="left">Manuel</td>
<td align="left">Diaz</td>
</tr>
<tr class="odd">
<td align="right">10</td>
<td align="left">Russell</td>
<td align="left">Edwards</td>
</tr>
<tr class="even">
<td align="right">3</td>
<td align="left">Bob</td>
<td align="left">Wilson</td>
</tr>
</tbody>
</table>
</div>
<p>LIKE:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb25-1"><a href="where.html#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> customer_id, customer_first_name, customer_last_name</span>
<span id="cb25-2"><a href="where.html#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> farmers_market.customer </span>
<span id="cb25-3"><a href="where.html#cb25-3" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> customer_first_name <span class="kw">LIKE</span> <span class="st">&#39;Jer%&#39;</span></span></code></pre></div>
<div class="knitsql-table">
<table>
<caption><span id="tab:unnamed-chunk-8">Table 2.6: </span>2 records</caption>
<thead>
<tr class="header">
<th align="right">customer_id</th>
<th align="left">customer_first_name</th>
<th align="left">customer_last_name</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">13</td>
<td align="left">Jeremy</td>
<td align="left">Gruber</td>
</tr>
<tr class="even">
<td align="right">18</td>
<td align="left">Jeri</td>
<td align="left">Mitchell</td>
</tr>
</tbody>
</table>
</div>
<p>Here the % sign acts as a wildcard so that all first names that start with “Jer” and have any number (or zero) additional characters will be included.</p>
<p>IS NULL / IS NOT NULL - this one is pretty straightforward but note that NULL entries and blank entries are not the same:</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb26-1"><a href="where.html#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span> </span>
<span id="cb26-2"><a href="where.html#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> farmers_market.product </span>
<span id="cb26-3"><a href="where.html#cb26-3" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> product_size <span class="kw">IS</span> <span class="kw">NULL</span></span>
<span id="cb26-4"><a href="where.html#cb26-4" aria-hidden="true" tabindex="-1"></a>      <span class="kw">OR</span> <span class="fu">TRIM</span>(product_size) <span class="op">=</span> <span class="st">&#39;&#39;</span></span></code></pre></div>
<div class="knitsql-table">
<table>
<caption><span id="tab:unnamed-chunk-9">Table 3.1: </span>2 records</caption>
<colgroup>
<col width="13%" />
<col width="25%" />
<col width="15%" />
<col width="24%" />
<col width="20%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">product_id</th>
<th align="left">product_name</th>
<th align="left">product_size</th>
<th align="right">product_category_id</th>
<th align="left">product_qty_type</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">14</td>
<td align="left">Red Potatoes</td>
<td align="left">NA</td>
<td align="right">1</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">15</td>
<td align="left">Red Potatoes - Small</td>
<td align="left"></td>
<td align="right">1</td>
<td align="left">NA</td>
</tr>
</tbody>
</table>
</div>
<p>The TRIM function used above removes spaces from the beginning and end of a string, and so can be used to find rows with entries that are blank, or just a space, or any number of spaces. Each of these are different from a NULL entry.</p>
<p>The chapter ends with a section on subqueries - queries within queries. In the IN example above, we used a hardcoded list of names, but we could also feed the results of one query into the WHERE criteria of another query:</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb27-1"><a href="where.html#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> market_date, customer_id, vendor_id, quantity <span class="op">*</span> cost_to_customer_per_qty price</span>
<span id="cb27-2"><a href="where.html#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> farmers_market.customer_purchases </span>
<span id="cb27-3"><a href="where.html#cb27-3" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> market_date <span class="kw">IN</span> (</span>
<span id="cb27-4"><a href="where.html#cb27-4" aria-hidden="true" tabindex="-1"></a>                  <span class="kw">SELECT</span> market_date </span>
<span id="cb27-5"><a href="where.html#cb27-5" aria-hidden="true" tabindex="-1"></a>                  <span class="kw">FROM</span> farmers_market.market_date_info </span>
<span id="cb27-6"><a href="where.html#cb27-6" aria-hidden="true" tabindex="-1"></a>                  <span class="kw">WHERE</span> market_rain_flag <span class="op">=</span> <span class="dv">1</span> </span>
<span id="cb27-7"><a href="where.html#cb27-7" aria-hidden="true" tabindex="-1"></a>                  )</span>
<span id="cb27-8"><a href="where.html#cb27-8" aria-hidden="true" tabindex="-1"></a><span class="kw">LIMIT</span> <span class="dv">5</span></span></code></pre></div>
<div class="knitsql-table">
<table>
<caption><span id="tab:unnamed-chunk-10">Table 3.2: </span>5 records</caption>
<thead>
<tr class="header">
<th align="left">market_date</th>
<th align="right">customer_id</th>
<th align="right">vendor_id</th>
<th align="right">price</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">2019-07-31</td>
<td align="right">3</td>
<td align="right">7</td>
<td align="right">18.4536</td>
</tr>
<tr class="even">
<td align="left">2019-07-31</td>
<td align="right">8</td>
<td align="right">7</td>
<td align="right">26.7717</td>
</tr>
<tr class="odd">
<td align="left">2019-07-31</td>
<td align="right">19</td>
<td align="right">7</td>
<td align="right">25.7931</td>
</tr>
<tr class="even">
<td align="left">2019-07-31</td>
<td align="right">22</td>
<td align="right">7</td>
<td align="right">7.4793</td>
</tr>
<tr class="odd">
<td align="left">2019-09-21</td>
<td align="right">6</td>
<td align="right">7</td>
<td align="right">13.9101</td>
</tr>
</tbody>
</table>
</div>
<p>In the query above we use a query on the market_date_info table to return all the dates when it rained, and then query the customer_purchases table to return purchases on those days.</p>
</div>
<div id="exercises-2" class="section level2" number="3.2">
<h2><span class="header-section-number">3.2</span> Exercises</h2>
<div id="ex.-1-2" class="section level3 unnumbered">
<h3>Ex. 1</h3>
<div id="question-5" class="section level4 unnumbered">
<h4>Question</h4>
<blockquote>
<p>Refer to the data in Table 3.1. Write a query that returns all customer purchases of product IDs 4 and 9.</p>
</blockquote>
</div>
<div id="answer-5" class="section level4 unnumbered">
<h4>Answer</h4>
<p>Here’s Table 3.1:</p>
<p><img src="images/Ch03Img01.png" /></p>
<div class="sourceCode" id="cb28"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb28-1"><a href="where.html#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECt</span> <span class="op">*</span></span>
<span id="cb28-2"><a href="where.html#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> table3<span class="fl">.1</span></span>
<span id="cb28-3"><a href="where.html#cb28-3" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> PRODUCT_ID <span class="op">=</span> <span class="dv">4</span> <span class="kw">OR</span> PRODUCT_ID <span class="op">=</span> <span class="dv">9</span></span></code></pre></div>
</div>
</div>
<div id="ex.-2-2" class="section level3 unnumbered">
<h3>Ex. 2</h3>
<div id="question-6" class="section level4 unnumbered">
<h4>Question</h4>
<blockquote>
<p>Refer to the data in Table 3.1. Write two queries, one using two conditions with an AND operator, and one using the BETWEEN operator, that will return all customer purchases made from vendors with vendor IDs between 8 and 10 (inclusive).</p>
</blockquote>
</div>
<div id="answer-6" class="section level4 unnumbered">
<h4>Answer</h4>
<div class="sourceCode" id="cb29"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb29-1"><a href="where.html#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECt</span> <span class="op">*</span></span>
<span id="cb29-2"><a href="where.html#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> table3<span class="fl">.1</span></span>
<span id="cb29-3"><a href="where.html#cb29-3" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> VENDOR_ID <span class="op">&gt;=</span> <span class="dv">8</span> <span class="kw">AND</span> VENDOR_ID <span class="op">&lt;=</span> <span class="dv">10</span></span></code></pre></div>
<div class="sourceCode" id="cb30"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb30-1"><a href="where.html#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECt</span> <span class="op">*</span></span>
<span id="cb30-2"><a href="where.html#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> table3<span class="fl">.1</span></span>
<span id="cb30-3"><a href="where.html#cb30-3" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> VENDOR_ID <span class="kw">BETWEEN</span> <span class="dv">8</span> <span class="kw">AND</span> <span class="dv">10</span></span></code></pre></div>
</div>
</div>
<div id="ex.-3-1" class="section level3 unnumbered">
<h3>Ex. 3</h3>
<div id="question-7" class="section level4 unnumbered">
<h4>Question</h4>
<blockquote>
<p>Can you think of two different ways to change the final query in the chapter so it would return purchases from days when it wasn’t raining?</p>
</blockquote>
</div>
<div id="answer-7" class="section level4 unnumbered">
<h4>Answer</h4>
<p>We could change the criterion on market_rain_flag to 0:</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb31-1"><a href="where.html#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> market_date, customer_id, vendor_id, quantity <span class="op">*</span> cost_to_customer_per_qty price</span>
<span id="cb31-2"><a href="where.html#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> farmers_market.customer_purchases </span>
<span id="cb31-3"><a href="where.html#cb31-3" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> market_date <span class="kw">IN</span> (</span>
<span id="cb31-4"><a href="where.html#cb31-4" aria-hidden="true" tabindex="-1"></a>                  <span class="kw">SELECT</span> market_date </span>
<span id="cb31-5"><a href="where.html#cb31-5" aria-hidden="true" tabindex="-1"></a>                  <span class="kw">FROM</span> farmers_market.market_date_info </span>
<span id="cb31-6"><a href="where.html#cb31-6" aria-hidden="true" tabindex="-1"></a>                  <span class="kw">WHERE</span> market_rain_flag <span class="op">=</span> <span class="dv">0</span> </span>
<span id="cb31-7"><a href="where.html#cb31-7" aria-hidden="true" tabindex="-1"></a>                  )</span>
<span id="cb31-8"><a href="where.html#cb31-8" aria-hidden="true" tabindex="-1"></a><span class="kw">LIMIT</span> <span class="dv">5</span></span></code></pre></div>
<div class="knitsql-table">
<table>
<caption><span id="tab:unnamed-chunk-14">Table 3.3: </span>5 records</caption>
<thead>
<tr class="header">
<th align="left">market_date</th>
<th align="right">customer_id</th>
<th align="right">vendor_id</th>
<th align="right">price</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">2019-07-03</td>
<td align="right">14</td>
<td align="right">7</td>
<td align="right">6.9201</td>
</tr>
<tr class="even">
<td align="left">2019-07-03</td>
<td align="right">14</td>
<td align="right">7</td>
<td align="right">15.2382</td>
</tr>
<tr class="odd">
<td align="left">2019-07-03</td>
<td align="right">15</td>
<td align="right">7</td>
<td align="right">10.6947</td>
</tr>
<tr class="even">
<td align="left">2019-07-03</td>
<td align="right">16</td>
<td align="right">7</td>
<td align="right">14.1198</td>
</tr>
<tr class="odd">
<td align="left">2019-07-03</td>
<td align="right">22</td>
<td align="right">7</td>
<td align="right">4.6134</td>
</tr>
</tbody>
</table>
</div>
<p>Or we could use NOT IN instead of IN:</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb32-1"><a href="where.html#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> market_date, customer_id, vendor_id, quantity <span class="op">*</span> cost_to_customer_per_qty price</span>
<span id="cb32-2"><a href="where.html#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> farmers_market.customer_purchases </span>
<span id="cb32-3"><a href="where.html#cb32-3" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> market_date <span class="kw">NOT</span> <span class="kw">IN</span> (</span>
<span id="cb32-4"><a href="where.html#cb32-4" aria-hidden="true" tabindex="-1"></a>                  <span class="kw">SELECT</span> market_date </span>
<span id="cb32-5"><a href="where.html#cb32-5" aria-hidden="true" tabindex="-1"></a>                  <span class="kw">FROM</span> farmers_market.market_date_info </span>
<span id="cb32-6"><a href="where.html#cb32-6" aria-hidden="true" tabindex="-1"></a>                  <span class="kw">WHERE</span> market_rain_flag <span class="op">=</span> <span class="dv">1</span> </span>
<span id="cb32-7"><a href="where.html#cb32-7" aria-hidden="true" tabindex="-1"></a>                  )</span>
<span id="cb32-8"><a href="where.html#cb32-8" aria-hidden="true" tabindex="-1"></a><span class="kw">LIMIT</span> <span class="dv">5</span></span></code></pre></div>
<div class="knitsql-table">
<table>
<caption><span id="tab:unnamed-chunk-15">Table 3.4: </span>5 records</caption>
<thead>
<tr class="header">
<th align="left">market_date</th>
<th align="right">customer_id</th>
<th align="right">vendor_id</th>
<th align="right">price</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">2019-07-03</td>
<td align="right">14</td>
<td align="right">7</td>
<td align="right">6.9201</td>
</tr>
<tr class="even">
<td align="left">2019-07-03</td>
<td align="right">14</td>
<td align="right">7</td>
<td align="right">15.2382</td>
</tr>
<tr class="odd">
<td align="left">2019-07-03</td>
<td align="right">15</td>
<td align="right">7</td>
<td align="right">10.6947</td>
</tr>
<tr class="even">
<td align="left">2019-07-03</td>
<td align="right">16</td>
<td align="right">7</td>
<td align="right">14.1198</td>
</tr>
<tr class="odd">
<td align="left">2019-07-03</td>
<td align="right">22</td>
<td align="right">7</td>
<td align="right">4.6134</td>
</tr>
</tbody>
</table>
</div>

</div>
</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="select.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="case.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/03-where.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf", "_main.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
